{
  "version": 3,
  "file": "HoverBox.js",
  "sourceRoot": "..",
  "sources": [
    "components/HoverBox.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "css = require './HoverBox.less'\n\ncn = require 'classnames'\nColor = require 'color'\n\n{StyleContext} = require './Style.coffee'\nMath.clamp = (num,min,max)->\n\treturn Math.min(Math.max(num, min), max)\n\nclass HoverBox extends Component\n\tconstructor: ->\n\t\tsuper()\n\t\t@state = \n\t\t\toffset_left: 0\n\t\t\toffset_top: 0\n\n\n\n\tonComponentDidMount: ->\n\t\t# @_overlay\n\n\n\n\n\tgetBoxPosition: ->\n\t\toverlay_rect = @_overlay.getBoundingClientRect()\n\n\t\tel = @props.getBindElement()\n\n\t\tdim = @props.getSize()\n\n\t\tget_rect = el.getBoundingClientRect()\n\t\n\n\t\tbtn = \n\t\t\ttop : get_rect.top\n\t\t\tbottom : get_rect.bottom\n\t\t\tleft : get_rect.left\n\t\t\tright : get_rect.right\n\t\t\twidth: get_rect.width\n\t\t\theight: get_rect.height\n\n\t\t# log btn\n\t\t\t\n\n\t\tsnap_y = @props.snap_y\n\t\tsnap_x = @props.snap_x\n\n\n\t\tif snap_x && snap_y\n\t\t\tsnap_y = 0\n\n\t\tif !snap_x && !snap_y\n\t\t\tsnap_y = 1\n\t\t\n\t\talign_x = @props.align_x\n\t\talign_y = @props.align_y\n\t\t\n\t\tpos_x = 0\n\t\tpos_y = 0\n\n\n\t\t# max_y = @props.max_y || window.innerHeight\n\t\t# max_x = @props.max_x || window.innerWidth\n\t\tpad = 8\n\t\tpad_top = DIM+3.75*2\n\n\n\t\theight = Math.min(overlay_rect.bottom-overlay_rect.top-pad-pad_top,dim.height)\n\t\twidth = Math.min(overlay_rect.right-overlay_rect.left-pad*2,dim.width)\n\n\t\t# log overlay_rect.right-overlay_rect.left\n\n\n\t\t\n\t\tbar_x = 0\n\t\tbar_y = 0\n\t\tbar_w = 6\n\t\tbar_h = 6\n\n\t\tmin_x = overlay_rect.left + pad_top\n\t\tmax_x = overlay_rect.right - pad - width\n\t\tmin_y = overlay_rect.top + pad\n\t\tmax_y = overlay_rect.bottom - pad - height\n\n\n\n\t\n\t\t\n\t\tif snap_y > 0\n\t\t\tpos_y = btn.bottom + pad\n\t\telse if snap_y < 0\n\t\t\tpos_y = btn.top - height - pad\n\t\telse if align_y > 0\n\t\t\tpos_y = btn.top\n\t\telse\n\t\t\tpos_y = btn.bottom - height\n\n\t\t\n\t\tif snap_x > 0\n\t\t\tpos_x = btn.right + pad\n\t\telse if snap_x < 0\n\t\t\tpos_x = btn.left - width - pad\n\t\telse if align_x > 0\n\t\t\tpos_x = btn.left\n\t\telse\n\t\t\tpos_x = btn.right - width\n\n\t\tif pos_x >= btn.right\n\t\t\tbar_x = btn.right + pad\n\t\t\tbar_y = btn.top + (btn.height/2)\n\t\t\tbar_h = 12\n\t\t\tbar_w = 6\n\t\telse if pos_x+width <= btn.left\n\t\t\tbar_x = btn.left - pad\n\t\t\tbar_y = btn.top + (btn.height/2)\n\t\t\tbar_h = 12\n\t\t\tbar_w = 6\n\t\t\n\n\t\telse if pos_y >= btn.bottom\n\t\t\tbar_x = btn.left + (btn.width/2)\n\t\t\tbar_y = btn.bottom + pad\n\t\t\tbar_h = 6\n\t\t\tbar_w = 12\n\t\telse\n\t\t\tbar_x = btn.left + (btn.width/2)\n\t\t\tbar_y = btn.top - pad\n\t\t\tbar_h = 6\n\t\t\tbar_w = 12\n\n\t\t\n\t\t\n\t\t\n\t\tpos_y = Math.clamp(pos_y,min_y,max_y)-overlay_rect.top\n\t\tpos_x = Math.clamp(pos_x,min_x,max_x)-overlay_rect.left\n\n\n\t\t# pos_y = Math.max(pos_y,pad)\n\t\t# pos_y = Math.min(pos_y,window.innerHeight - pad - height)\n\t\t# pos_x = Math.max(pos_x,pad)\n\t\t# pos_x = Math.min(pos_x,window.innerWidth - pad - width)\n\n\n\t\treturn\n\t\t\tx: pos_x\n\t\t\ty: pos_y\n\t\t\tbar_x: bar_x-overlay_rect.left\n\t\t\tbar_y: bar_y-overlay_rect.top\n\t\t\tbar_w: bar_w\n\t\t\tbar_h: bar_h\n\t\t\twidth: width\n\t\t\theight: height\n\n\n\n\toverlayRef: (el)=>\n\t\t@_overlay = el\n\n\tcomponentWillUpdate: ->\n\t\toverlay_rect = @_overlay.getBoundingClientRect()\n\n\t\t@state.offset_left = overlay_rect.left\n\t\t@state.offset_top = overlay_rect.top\n\n\tcomponentDidUpdate: (prev_props,prev_state)->\n\n\n\t\t# log @props.show_delay\n\t\t# if\n\t\t# log @props.visible,@state.render_box\n\t\tif @props.visible && @_hide_box_timer\n\t\t\t@resetHideTimer()\n\n\t\tif @props.visible != prev_props.visible || @props.visible != @state.visible\n\t\t\tif @props.visible\n\t\t\t\t# log 'RENDER'\n\t\t\t\t@resetHideTimer()\n\t\t\t\t\n\t\t\t\tif @props.visible_delay\n\t\t\t\t\t@_render_box_timer = setTimeout ()=>\n\t\t\t\t\t\t@_render_box_timer = null\n\t\t\t\t\t\t@setState\n\t\t\t\t\t\t\tvisible: yes\n\t\t\t\t\t,if @props.show_delay? then @props.show_delay else 600\n\t\t\t\telse\n\t\t\t\t\t@setState\n\t\t\t\t\t\tvisible: yes\n\t\t\t\n\t\t\telse\n\t\t\t\t@resetHideTimer()\n\t\t\t\t@_hide_box_timer = setTimeout ()=>\n\t\t\t\t\t@_hide_box_timer = null\n\t\t\t\t\t@setState\n\t\t\t\t\t\tvisible: no\n\t\t\t\t,if @props.hide_delay? then @props.hide_delay else 200\n\t\n\t\t\t\n\n\tresetHideTimer: =>\n\t\tclearTimeout(@_hide_box_timer)\n\t\tclearTimeout(@_render_box_timer)\n\t\t@_render_box_timer = null\n\t\t@_hide_box_timer = null\n\n\n\tonMouseEnter: =>\n\t\t@setState\n\t\t\thover: yes\n\t\t\n\t\t@resetHideTimer()\n\t\n\tonMouseLeave: =>\n\t\t@setState\n\t\t\thover: no\n\n\t\t@resetHideTimer()\n\t\t@forceUpdate()\n\t\t\n\n\tonClickOverlay: (e)=>\n\t\tif e.target == @_overlay\n\t\t\t@props.onClickOverlay(e)\n\t\n\n\tsetBackdropColor: (bg,alpha)=>\n\t\tif bg == 'none'\n\t\t\treturn 'none'\n\t\treturn Color(bg).alpha(alpha).string()\n\n\n\trender: ->\n\t\tif @state.visible || @props.visible\n\t\t\tpos = @getBoxPosition()\n\n\n\t\tif @props.onClickOverlay && @state.visible\n\t\t\toverlay_background = @setBackdropColor(@props.background,0.7)\n\t\telse\n\t\t\toverlay_background = @setBackdropColor(@props.background,0.0)\n\n\t\tif @props.flat && @state.visible\n\t\t\tbox = h 'div',\n\t\t\t\tclassName: css['hover-box-flat']\n\t\t\t\tonMouseEnter: @props.box_pointer_events && @onMouseEnter || null\n\t\t\t\tonMouseLeave: @props.box_pointer_events && @onMouseLeave || null\n\t\t\t\tstyle:\n\t\t\t\t\tpointerEvents: @props.box_pointer_events && 'all' || 'none'\n\t\t\t\t\ttop: pos.y\n\t\t\t\t\tleft: pos.x\n\t\t\t\t\twidth: pos.width\n\t\t\t\t\theight: pos.height\n\t\t\t\t\tcolor: @context.primary.color[0]\n\t\t\t\t@props.renderContent?(@state.offset_left,@state.offset_top)\n\n\t\telse if @state.visible\n\t\t\tbox = h 'div',\n\t\t\t\tclassName: cn css['hover-box'],css['modal-shadow'],css['hover-box-scroll']\n\t\t\t\tonMouseEnter: @props.box_pointer_events && @onMouseEnter || null\n\t\t\t\tonMouseLeave: @props.box_pointer_events && @onMouseLeave || null\n\t\t\t\tstyle:\n\t\t\t\t\tpointerEvents: @props.box_pointer_events && 'all' || 'none'\n\t\t\t\t\ttop: pos.y\n\t\t\t\t\tleft: pos.x\n\t\t\t\t\twidth: pos.width\n\t\t\t\t\theight: pos.height\n\t\t\t\t\tcolor: @context.primary.color[0]\n\t\t\t\t\tbackground: @context.primary.inv[0]\n\t\t\t\t@props.renderContent?(@state.offset_left,@state.offset_top)\n\n\n\t\tif @props.visible || @state.visible\n\t\t\tbox_bar = h 'div',\n\t\t\t\tclassName: css['hover-box-bar']\n\t\t\t\tstyle:\n\t\t\t\t\ttop: pos.bar_y\n\t\t\t\t\tleft: pos.bar_x\n\t\t\t\t\twidth: pos.bar_w\n\t\t\t\t\theight: pos.bar_h\n\t\t\t\t\tbackground: @context.secondary.inv[0]\n\n\t\tif pos & @props.show_close_btn\n\t\t\tclose_btn = h Input,\n\t\t\t\ttype: 'button'\n\t\t\t\ti: 'close'\n\t\t\t\tbig: yes\n\t\t\t\tonClick: @props.onClickOverlay && @onClickOverlay\n\t\t\t\tstyle:\n\t\t\t\t\tcolor: 'white'\n\t\t\t\t\tposition: 'fixed'\n\t\t\t\t\tbackground: 'none'\n\t\t\t\t\tleft: pos.x+pos.width-DIM-3.75\n\t\t\t\t\ttop: pos.y-DIM-3.75-3.75\n\t\t\t\ti_style:\n\t\t\t\t\tcolor: 'white'\n\n\t\th 'div',\n\t\t\tref: @overlayRef\n\t\t\tonClick: @props.onClickOverlay && @onClickOverlay\n\t\t\tclassName: cn css['hover-box-overlay'],@state.visible && @props.onClickOverlay && css['visible']\n\t\t\tstyle:\n\t\t\t\tbackground: overlay_background\n\t\t\tbox\n\t\t\tclose_btn\n\t\t\t# box_bar\n\n\n\nHoverBox.contextType = StyleContext\n\nmodule.exports = HoverBox"
  ]
}