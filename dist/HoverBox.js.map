{
  "version": 3,
  "file": "HoverBox.js",
  "sourceRoot": "..",
  "sources": [
    "components/HoverBox.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "css = require './HoverBox.less'\n\ncn = require 'classnames'\nColor = require 'color'\n\n{StyleContext} = require './Style.coffee'\n\nclass HoverBox extends Component\n\tconstructor: ->\n\t\tsuper()\n\t\t@state = {}\n\n\n\n\tonComponentDidMount: ->\n\t\t# @_overlay\n\n\n\n\n\tgetBoxPosition: ->\n\t\tel = @props.getBindElement()\n\n\t\tdim = @props.getSize()\n\n\t\tget_rect = el.getBoundingClientRect()\n\t\n\t\toff_x = @props.offset_x || 0\n\t\toff_y = @props.offset_y || 0\n\t\t\n\t\tbounding_rect = \n\n\t\t\ttop : get_rect.top + off_y\n\t\t\tbottom : get_rect.bottom + off_y\n\t\t\tleft : get_rect.left + off_x\n\t\t\tright : get_rect.right + off_x\n\t\t\twidth: get_rect.width\n\t\t\theight: get_rect.height\n\t\t\t\n\n\t\tsnap_y = @props.snap_y\n\t\tsnap_x = @props.snap_x\n\n\n\t\tif snap_x && snap_y\n\t\t\tsnap_y = 0\n\n\t\tif !snap_x && !snap_y\n\t\t\tsnap_y = 1\n\t\t\n\t\talign_x = @props.align_x\n\t\talign_y = @props.align_y\n\t\t\n\t\tpos_x = 0\n\t\tpos_y = 0\n\n\n\t\tmax_y = @props.max_y || window.innerHeight\n\t\tmax_x = @props.max_x || window.innerWidth\n\n\n\t\tpad = 4\n\t\tbar_x = 0\n\t\tbar_y = 0\n\t\tbar_w = 6\n\t\tbar_h = 6\n\t\t\n\t\tif snap_y > 0\n\t\t\tpos_y = bounding_rect.bottom + pad\n\n\t\t\tif pos_y + dim.height > max_y\n\t\t\t\tpos_y =  bounding_rect.top - dim.height - pad\n\t\t\n\t\telse if snap_y < 0\n\t\t\tpos_y = bounding_rect.top - dim.height - pad\n\t\t\tif pos_y < 0\n\t\t\t\tpos_y = bounding_rect.bottom + pad\n\t\t\n\t\telse\n\t\t\tif align_y > 0\n\t\t\t\tpos_y = bounding_rect.top\n\t\t\t\tif pos_y + dim.height > max_y\n\t\t\t\t\tpos_y = bounding_rect.bottom - dim.height\n\t\t\t\t\n\t\t\telse\n\t\t\t\tpos_y = bounding_rect.bottom - dim.height\n\t\t\t\tif pos_y < 0\n\t\t\t\t\tpos_y = bounding_rect.top\n\n\n\t\tif snap_x > 0\n\t\t\tpos_x = bounding_rect.right + pad\n\t\t\tif pos_x + dim.width > max_x\n\t\t\t\tpos_x = bounding_rect.left - dim.width - pad\n\n\t\telse if snap_x < 0\n\t\t\tpos_x = bounding_rect.left - dim.width - pad\n\t\t\tif pos_x < 0\n\t\t\t\tpos_x = bounding_rect.right + pad\n\n\t\t\n\t\telse\n\t\t\tif align_x > 0\n\t\t\t\tpos_x = bounding_rect.left\n\t\t\t\tif pos_x + dim.width > max_x\n\t\t\t\t\tpos_x = bounding_rect.right - dim.width\n\t\t\telse\n\t\t\t\tpos_x = bounding_rect.right - dim.width\n\t\t\t\tif pos_x < 0\n\t\t\t\t\tpos_x = bounding_rect.left\n\n\n\t\tif pos_x >= bounding_rect.right\n\t\t\tbar_x = bounding_rect.right + pad\n\t\t\tbar_y = bounding_rect.top + (bounding_rect.height/2)\n\t\t\tbar_h = 12\n\t\t\tbar_w = 6\n\t\telse if pos_x+dim.width <= bounding_rect.left\n\t\t\tbar_x = bounding_rect.left - pad\n\t\t\tbar_y = bounding_rect.top + (bounding_rect.height/2)\n\t\t\tbar_h = 12\n\t\t\tbar_w = 6\n\t\t\n\n\t\telse if pos_y >= bounding_rect.bottom\n\t\t\tbar_x = bounding_rect.left + (bounding_rect.width/2)\n\t\t\tbar_y = bounding_rect.bottom + pad\n\t\t\tbar_h = 6\n\t\t\tbar_w = 12\n\t\telse\n\t\t\tbar_x = bounding_rect.left + (bounding_rect.width/2)\n\t\t\tbar_y = bounding_rect.top - pad\n\t\t\tbar_h = 6\n\t\t\tbar_w = 12\n\n\t\tpad = 7.5\n\n\t\theight = Math.min(window.innerHeight-pad*2,dim.height)\n\t\twidth = Math.min(window.innerWidth-pad*2,dim.width)\n\n\n\t\tpos_y = Math.max(pos_y,pad)\n\t\tpos_y = Math.min(pos_y,window.innerHeight - pad - height)\n\t\tpos_x = Math.max(pos_x,pad)\n\t\tpos_x = Math.min(pos_x,window.innerWidth - pad - width)\n\n\n\t\treturn\n\t\t\tx: pos_x\n\t\t\ty: pos_y\n\t\t\tbar_x: bar_x\n\t\t\tbar_y: bar_y\n\t\t\tbar_w: bar_w\n\t\t\tbar_h: bar_h\n\t\t\twidth: width\n\t\t\theight: height\n\n\n\n\toverlayRef: (el)=>\n\t\t@_overlay = el\n\n\n\tcomponentDidUpdate: (prev_props,prev_state)->\n\n\t\t# log @props.show_delay\n\t\t# if\n\t\t# log @props.visible,@state.render_box\n\t\tif @props.visible && @_hide_box_timer\n\t\t\t@resetHideTimer()\n\n\t\tif @props.visible != prev_props.visible || @props.visible != @state.visible\n\t\t\tif @props.visible\n\t\t\t\t# log 'RENDER'\n\t\t\t\t@resetHideTimer()\n\t\t\t\t\n\t\t\t\tif @props.visible_delay\n\t\t\t\t\t@_render_box_timer = setTimeout ()=>\n\t\t\t\t\t\t@_render_box_timer = null\n\t\t\t\t\t\t@setState\n\t\t\t\t\t\t\tvisible: yes\n\t\t\t\t\t,if @props.show_delay? then @props.show_delay else 600\n\t\t\t\telse\n\t\t\t\t\t@setState\n\t\t\t\t\t\tvisible: yes\n\t\t\t\n\t\t\telse\n\t\t\t\t@resetHideTimer()\n\t\t\t\t@_hide_box_timer = setTimeout ()=>\n\t\t\t\t\t@_hide_box_timer = null\n\t\t\t\t\t@setState\n\t\t\t\t\t\tvisible: no\n\t\t\t\t,if @props.hide_delay? then @props.hide_delay else 200\n\t\n\t\t\t\n\n\tresetHideTimer: =>\n\t\tclearTimeout(@_hide_box_timer)\n\t\tclearTimeout(@_render_box_timer)\n\t\t@_render_box_timer = null\n\t\t@_hide_box_timer = null\n\n\n\tonMouseEnter: =>\n\t\t@setState\n\t\t\thover: yes\n\t\t\n\t\t@resetHideTimer()\n\t\n\tonMouseLeave: =>\n\t\t@setState\n\t\t\thover: no\n\n\t\t@resetHideTimer()\n\t\t@forceUpdate()\n\t\t\n\n\tonClickOverlay: (e)=>\n\t\tif e.target == @_overlay\n\t\t\t@props.onClickOverlay(e)\n\t\n\n\tsetBackdropColor: (bg,alpha)=>\n\t\tif bg == 'none'\n\t\t\treturn 'none'\n\t\treturn Color(bg).alpha(alpha).string()\n\n\n\trender: ->\n\t\tif @state.visible || @props.visible\n\t\t\tpos = @getBoxPosition()\n\n\n\t\tif @props.onClickOverlay && @state.visible\n\t\t\toverlay_background = @setBackdropColor(@props.background,0.7)\n\t\telse\n\t\t\toverlay_background = @setBackdropColor(@props.background,0.0)\n\n\t\tif @props.flat && @state.visible\n\t\t\tbox = h 'div',\n\t\t\t\tclassName: css['hover-box-flat']\n\t\t\t\tonMouseEnter: @props.box_pointer_events && @onMouseEnter || null\n\t\t\t\tonMouseLeave: @props.box_pointer_events && @onMouseLeave || null\n\t\t\t\tstyle:\n\t\t\t\t\tpointerEvents: @props.box_pointer_events && 'all' || 'none'\n\t\t\t\t\ttop: pos.y\n\t\t\t\t\tleft: pos.x\n\t\t\t\t\twidth: pos.width\n\t\t\t\t\theight: pos.height\n\t\t\t\t\tcolor: @context.primary.color[0]\n\t\t\t\t@props.renderContent?()\n\n\t\telse if @state.visible\n\t\t\tbox = h 'div',\n\t\t\t\tclassName: cn css['hover-box'],css['modal-shadow'],@props.scroll && css['hover-box-scroll']\n\t\t\t\tonMouseEnter: @props.box_pointer_events && @onMouseEnter || null\n\t\t\t\tonMouseLeave: @props.box_pointer_events && @onMouseLeave || null\n\t\t\t\tstyle:\n\t\t\t\t\tpointerEvents: @props.box_pointer_events && 'all' || 'none'\n\t\t\t\t\ttop: pos.y\n\t\t\t\t\tleft: pos.x\n\t\t\t\t\twidth: pos.width\n\t\t\t\t\theight: pos.height\n\t\t\t\t\tcolor: @context.primary.color[0]\n\t\t\t\t\tbackground: @context.primary.inv[0]\n\t\t\t\t@props.renderContent?()\n\n\n\t\tif @props.visible || @state.visible\n\t\t\tbox_bar = h 'div',\n\t\t\t\tclassName: css['hover-box-bar']\n\t\t\t\tstyle:\n\t\t\t\t\ttop: pos.bar_y\n\t\t\t\t\tleft: pos.bar_x\n\t\t\t\t\twidth: pos.bar_w\n\t\t\t\t\theight: pos.bar_h\n\t\t\t\t\tbackground: @context.secondary.inv[0]\n\n\n\n\t\th 'div',\n\t\t\tref: @overlayRef\n\t\t\tonClick: @props.onClickOverlay && @onClickOverlay\n\t\t\tclassName: cn css['hover-box-overlay'],@state.visible && @props.onClickOverlay && css['visible']\n\t\t\tstyle:\n\t\t\t\tbackground: overlay_background\n\t\t\tbox\n\t\t\tbox_bar\n\n\n\nHoverBox.contextType = StyleContext\n\nmodule.exports = HoverBox"
  ]
}